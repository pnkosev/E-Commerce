<form
    (ngSubmit)="register()"
    [formGroup]="form"
    fxLayout="column"
    fxLayoutAlign="center center"
    fxLayoutGap="20px">

  <mat-form-field appearance="legacy" fxFlexOffset="40px">
    <mat-label>Email</mat-label>
    <input matInput placeholder="example@gmail.com" formControlName="email">
    <mat-hint>Please enter a valid email</mat-hint>
    <mat-icon *ngIf="email.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
    <mat-icon *ngIf="email.touched && email.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
    <mat-error *ngIf="email.hasError('required')">Email is required.</mat-error>
    <mat-error *ngIf="email.hasError('email')">Email is invalid.</mat-error>
  </mat-form-field>

  <mat-form-field appearance="legacy">
    <mat-label>First name</mat-label>
    <input matInput placeholder="John" formControlName="firstName">
    <mat-hint>Please enter your first name</mat-hint>
    <mat-icon *ngIf="firstName.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
    <mat-icon *ngIf="firstName.touched && firstName.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
    <mat-error *ngIf="firstName.hasError('required')">First name is required.</mat-error>
    <mat-error *ngIf="firstName.hasError('pattern')">First name is invalid.</mat-error>
  </mat-form-field>

  <mat-form-field appearance="legacy">
    <mat-label>Last name</mat-label>
    <input matInput placeholder="Doe" formControlName="lastName">
    <mat-hint>Please enter your last name</mat-hint>
    <mat-icon *ngIf="lastName.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
    <mat-icon *ngIf="lastName.touched && lastName.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
    <mat-error *ngIf="lastName.hasError('required')">Last name is required.</mat-error>
    <mat-error *ngIf="lastName.hasError('pattern')">Last name is invalid.</mat-error>
  </mat-form-field>

  <div fxLayoutGap="20px">
    <mat-form-field appearance="legacy" style="width: 90px">
      <mat-select placeholder="Country code" formControlName="code">
        <mat-option value="{{code}}" *ngFor="let code of phoneCodes">{{code}}</mat-option>
      </mat-select>
      <mat-hint>Choose your country code</mat-hint>
    </mat-form-field>
    <mat-form-field appearance="legacy" style="width: 190px" hintLabel="Max 10 characters">
    <mat-label>Phone Number</mat-label>
      <input matInput #phoneNumberInput maxlength="10" placeholder="0782298959" formControlName="phoneNumber">
      <mat-hint align="end">{{phoneNumberInput.value?.length || 0}}/10</mat-hint>
      <mat-icon *ngIf="phoneNumber.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
      <mat-icon *ngIf="phoneNumber.touched && phoneNumber.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
      <mat-error *ngIf="phoneNumber.hasError('required')">Phone number is required.</mat-error>
      <mat-error *ngIf="phoneNumber.hasError('pattern')">Phone number is invalid.</mat-error>
    </mat-form-field>
  </div>

  <mat-form-field appearance="legacy">
    <mat-label>Password</mat-label>
    <input matInput placeholder="S3cuRedPa55" type="password" formControlName="password">
    <mat-hint>Please enter a password (6-15 symbols)</mat-hint>
    <mat-icon *ngIf="password.touched && password.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
    <mat-icon *ngIf="password.touched && password.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
    <mat-error *ngIf="password.hasError('required')">Password is required.</mat-error>
    <mat-error *ngIf="password.hasError('pattern')">Password must be between 6 and 15 symbols.</mat-error>
  </mat-form-field>

  <mat-form-field appearance="legacy">
    <mat-label>Repeat password</mat-label>
    <input matInput placeholder="R3p347Pa55" type="password" formControlName="repeatPassword">
    <mat-hint>Please confirm your password</mat-hint>
    <mat-icon *ngIf="repeatPassword.dirty && repeatPassword.valid" class="valid" matSuffix>sentiment_very_satisfied</mat-icon>
    <mat-icon *ngIf="repeatPassword.touched && repeatPassword.invalid" class="invalid" matSuffix>sentiment_very_dissatisfied</mat-icon>
    <mat-error *ngIf="repeatPassword.hasError('required') || repeatPassword.hasError('pattern')">Please confirm your password.</mat-error>
  </mat-form-field>
  <mat-error *ngIf="password.value !== repeatPassword.value && password.touched && repeatPassword.touched">Passwords must match</mat-error>

  <button [disabled]="form.invalid" mat-raised-button type="submit" color="primary">Register</button>
</form>
<p class="text-center">Have an account? <a routerLink="/user/login" routerLinkActive="active">Log In</a> </p>
